# #######################################################################
# ####                                                               ####
# ####             THIS FILE IS AUTOMATICALLY GENERATED.             ####
# ####          PLEASE ONLY MODIFY IT MANUALLY WHEN NEEDED.          ####
# ####                                                               ####
# #######################################################################
branches:
- release-1.1
image: gcr.io/knative-tests/test-infra/prow-tests:v20220412-eae25a77
jobs:
- command:
  - runner.sh
  - ./test/presubmit-tests.sh
  - --build-tests
  excluded_requirements:
  - gcp
  name: build-tests
  types:
  - presubmit
- command:
  - runner.sh
  - ./test/presubmit-tests.sh
  - --unit-tests
  excluded_requirements:
  - gcp
  name: unit-tests
  resources: default
  types:
  - presubmit
- command:
  - runner.sh
  - ./test/presubmit-tests.sh
  - --run-test
  - ./test/e2e-conformance-tests.sh
  name: conformance-tests
  types:
  - presubmit
- command:
  - runner.sh
  - ./test/presubmit-tests.sh
  - --run-test
  - ./test/e2e-rekt-tests.sh
  modifiers:
  - presubmit_optional
  name: reconciler-tests
  types:
  - presubmit
- command:
  - runner.sh
  - ./test/presubmit-tests.sh
  - --run-test
  - ./test/e2e-upgrade-tests.sh
  name: upgrade-tests
  types:
  - presubmit
- command:
  - runner.sh
  - ./test/presubmit-tests.sh
  - --all-tests
  name: continuous
  timeout: 3h
  types:
  - periodic
- args:
  - bash
  - -c
  - |
    mkdir -p /root/.kube
    cat /opt/cluster/ci-script > connect.sh
    chmod +x connect.sh
    ./connect.sh eventing_rekt-11
    kubectl get cm s390x-config-eventing -n default -o jsonpath='{.data.adjustment-script}' > adjust.sh
    chmod +x adjust.sh
    ./adjust.sh
    ./test/e2e-rekt-tests.sh --run-tests
  command:
  - runner.sh
  env:
  - name: SYSTEM_NAMESPACE
    value: knative-eventing
  - name: SCALE_CHAOSDUCK_TO_ZERO
    value: "1"
  name: s390x-e2e-reconciler-tests
  cron: 20 17 * * *
  requirements:
  - s390x
  types:
  - periodic
- args:
  - bash
  - -c
  - |
    mkdir -p /root/.kube
    cat /opt/cluster/ci-script > connect.sh
    chmod +x connect.sh
    ./connect.sh eventing-11
    kubectl get cm s390x-config-eventing -n default -o jsonpath='{.data.adjustment-script}' > adjust.sh
    chmod +x adjust.sh
    ./adjust.sh
    ./test/e2e-tests.sh --run-tests
  command:
  - runner.sh
  env:
  - name: SYSTEM_NAMESPACE
    value: knative-eventing
  - name: SCALE_CHAOSDUCK_TO_ZERO
    value: "1"
  name: s390x-e2e-tests
  cron: 20 15 * * *
  requirements:
  - s390x
  types:
  - periodic
- command:
  - runner.sh
  - ./hack/release.sh
  - --dot-release
  - --release-gcs
  - knative-releases/eventing
  - --release-gcr
  - gcr.io/knative-releases
  - --github-token
  - /etc/hub-token/token
  - --branch
  - release-1.1
  name: release
  timeout: 3h
  requirements:
  - release
  excluded_requirements:
  - gcp
  types:
  - periodic
org: knative
repo: eventing
resources: high
resources_presets:
  default:
    limits:
      memory: 10Gi
    requests:
      memory: 8Gi
  high:
    limits:
      memory: 16Gi
    requests:
      memory: 12Gi
